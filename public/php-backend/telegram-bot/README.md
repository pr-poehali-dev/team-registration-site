# ü§ñ PHP Telegram Bot –¥–ª—è Timeweb

PHP –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –æ–±—ã—á–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ **–ë–ï–ó VPS**.

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –∫–∞–ø–∏—Ç–∞–Ω–æ–≤ –∫–æ–º–∞–Ω–¥:
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/myteam` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ (–æ–¥–æ–±—Ä–µ–Ω–∞/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞)

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:
- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/register` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `/myteam` - –ü–æ–∫–∞–∑–∞—Ç—å –º–æ—é –∫–æ–º–∞–Ω–¥—É
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ Timeweb

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `telegram-bot/` –≤ `public_html/php-backend/`:

```
public_html/
‚îî‚îÄ‚îÄ php-backend/
    ‚îî‚îÄ‚îÄ telegram-bot/
        ‚îú‚îÄ‚îÄ webhook.php              ‚Üê –û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook
        ‚îú‚îÄ‚îÄ set-webhook.php          ‚Üê –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
        ‚îú‚îÄ‚îÄ send-notification.php    ‚Üê –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        ‚îî‚îÄ‚îÄ README.md                ‚Üê –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://ce876244.tw1.ru/php-backend/telegram-bot/set-webhook.php
   ```

2. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
   ```
   ‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
   URL: https://ce876244.tw1.ru/php-backend/telegram-bot/webhook.php
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å webhook –Ω–∞ —ç—Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞: [@TournamentWR_bot](https://t.me/TournamentWR_bot)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

–í —Ñ–∞–π–ª–∞—Ö `webhook.php`, `set-webhook.php`, `send-notification.php` –∏–∑–º–µ–Ω–∏—Ç–µ:

```php
define('BOT_TOKEN', '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê');
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ URL

–í —Ñ–∞–π–ª–µ `set-webhook.php` –∏–∑–º–µ–Ω–∏—Ç–µ:

```php
define('WEBHOOK_URL', 'https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/php-backend/telegram-bot/webhook.php');
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º API

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –≤ `teams.php`:

```php
// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
$team_id = $pdo->lastInsertId();

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –∫–∞–ø–∏—Ç–∞–Ω—É
$notify_url = 'https://ce876244.tw1.ru/php-backend/telegram-bot/send-notification.php';
$notify_data = [
    'team_id' => $team_id,
    'action' => 'send_auth_code'
];

$options = [
    'http' => [
        'header'  => "Content-type: application/json\r\n",
        'method'  => 'POST',
        'content' => json_encode($notify_data),
        'timeout' => 5
    ]
];

$context = stream_context_create($options);
@file_get_contents($notify_url, false, $context);
```

### –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –≤ `teams.php`:

```php
// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ pending_changes
$stmt = $pdo->prepare("
    INSERT INTO pending_changes (team_id, changes, old_values) 
    VALUES (?, ?, ?)
");
$stmt->execute([
    $team_id,
    json_encode($changes),
    json_encode($old_values)
]);

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
$notify_data = [
    'team_id' => $team_id,
    'action' => 'confirm_edit'
];

// ... –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ file_get_contents
```

### –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –≤ `teams.php`:

```php
// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
$notify_data = [
    'team_id' => $team_id,
    'action' => 'confirm_delete'
];

// ... –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ file_get_contents
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

–ü—Ä–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∑–∞—è–≤–∫–∏:

```php
// –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
$notify_data = [
    'team_id' => $team_id,
    'action' => 'notify_status'
];

// ... –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ file_get_contents
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Servers
       ‚Üì
   webhook.php (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π/–∫–Ω–æ–ø–æ–∫)
       ‚Üì
   MySQL Database (teams, pending_changes)
       ‚Üë
   teams.php (–æ—Å–Ω–æ–≤–Ω–æ–π API)
       ‚Üì
send-notification.php (–æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
       ‚Üì
   Telegram API
       ‚Üì
  –ö–∞–ø–∏—Ç–∞–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
```

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã

1. **–ö–∞–ø–∏—Ç–∞–Ω** –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ
2. **API** —Å–æ–∑–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É –≤ –ë–î
3. **API** –≤—ã–∑—ã–≤–∞–µ—Ç `send-notification.php` —Å `action=send_auth_code`
4. **–ë–æ—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω—É –≤ Telegram
5. **–ö–∞–ø–∏—Ç–∞–Ω** –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã

1. **–ö–∞–ø–∏—Ç–∞–Ω** —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–∞–π—Ç–µ
2. **API** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `pending_changes`
3. **API** –≤—ã–∑—ã–≤–∞–µ—Ç `send-notification.php` —Å `action=confirm_edit`
4. **–ë–æ—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. **–ö–∞–ø–∏—Ç–∞–Ω** –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
6. **Webhook** –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª—è–µ—Ç –∏–∑ `pending_changes`

### –ü—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã

1. **–ö–∞–ø–∏—Ç–∞–Ω** —É–¥–∞–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–∞–π—Ç–µ
2. **API** –≤—ã–∑—ã–≤–∞–µ—Ç `send-notification.php` —Å `action=confirm_delete`
3. **–ë–æ—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
4. **–ö–∞–ø–∏—Ç–∞–Ω** –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "‚úÖ –î–∞, —É–¥–∞–ª–∏—Ç—å"
5. **Webhook** —É–¥–∞–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏–∑ –ë–î

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getWebhookInfo
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://ce876244.tw1.ru/php-backend/telegram-bot/webhook.php",
    "has_custom_certificate": false,
    "pending_update_count": 0
  }
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í `webhook.php` —É–∂–µ –µ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```php
error_log("Telegram Update: " . $content);
```

–õ–æ–≥–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è:
- –ü–∞–Ω–µ–ª—å Timeweb ‚Üí **–õ–æ–≥–∏** ‚Üí **–õ–æ–≥–∏ PHP**
- –ò–ª–∏ –≤ `/var/log/php_errors.log`

### –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test-send.php`:

```php
<?php
require_once __DIR__ . '/../config.php';

$notify_url = 'https://ce876244.tw1.ru/php-backend/telegram-bot/send-notification.php';

$data = [
    'team_id' => 1,  // ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã
    'action' => 'send_auth_code'
];

$options = [
    'http' => [
        'header'  => "Content-type: application/json\r\n",
        'method'  => 'POST',
        'content' => json_encode($data)
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($notify_url, false, $context);

echo "–†–µ–∑—É–ª—å—Ç–∞—Ç: " . $result;
```

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://ce876244.tw1.ru/php-backend/telegram-bot/test-send.php`

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. Chat ID vs Username

–ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ `chat_id` –∫–∞–ø–∏—Ç–∞–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `telegram_users`.

–ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ username:
```php
$chat_id = '@username';
```

**–í–∞–∂–Ω–æ:** –ö–∞–ø–∏—Ç–∞–Ω –¥–æ–ª–∂–µ–Ω —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`, —á—Ç–æ–±—ã –µ–≥–æ `chat_id` —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –≤ –ë–î.

### 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ chat_id

–î–æ–±–∞–≤—å—Ç–µ –≤ `webhook.php` –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ `/start`:

```php
if ($text === '/start') {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å chat_id –≤ –ë–î
    $stmt = $pdo->prepare("
        INSERT INTO telegram_users (chat_id, username, first_name, last_name) 
        VALUES (?, ?, ?, ?)
        ON DUPLICATE KEY UPDATE chat_id = ?, first_name = ?, last_name = ?
    ");
    
    $stmt->execute([
        $chat_id,
        $username,
        $message['from']['first_name'] ?? '',
        $message['from']['last_name'] ?? '',
        $chat_id,
        $message['from']['first_name'] ?? '',
        $message['from']['last_name'] ?? ''
    ]);
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
    // ...
}
```

### 3. Timeout —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑—É–µ–º `@file_get_contents` —Å timeout 5 —Å–µ–∫—É–Ω–¥:

```php
@file_get_contents($notify_url, false, $context);
```

–°–∏–º–≤–æ–ª `@` –ø–æ–¥–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏, —á—Ç–æ–±—ã –æ—Å–Ω–æ–≤–Ω–æ–π API –Ω–µ –ø–∞–¥–∞–ª –µ—Å–ª–∏ –±–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

### 4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–î–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—á–µ—Ä–µ–¥—å:

```php
// –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
$stmt = $pdo->prepare("
    INSERT INTO notification_queue (team_id, action, created_at) 
    VALUES (?, ?, NOW())
");
$stmt->execute([$team_id, 'send_auth_code']);
```

–ò cron –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```bash
*/5 * * * * php /path/to/process-queue.php
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ IP Telegram

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ `webhook.php`:

```php
$telegram_ips = [
    '149.154.160.0/20',
    '91.108.4.0/22'
];

$client_ip = $_SERVER['REMOTE_ADDR'];
$is_telegram = false;

foreach ($telegram_ips as $ip_range) {
    if (cidr_match($client_ip, $ip_range)) {
        $is_telegram = true;
        break;
    }
}

if (!$is_telegram) {
    http_response_code(403);
    exit('Access denied');
}

function cidr_match($ip, $range) {
    list($subnet, $bits) = explode('/', $range);
    $ip = ip2long($ip);
    $subnet = ip2long($subnet);
    $mask = -1 << (32 - $bits);
    return ($ip & $mask) == ($subnet & $mask);
}
```

### Secret Token (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ webhook:

```php
$data = [
    'url' => WEBHOOK_URL,
    'secret_token' => '–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-—Ç–æ–∫–µ–Ω-32-—Å–∏–º–≤–æ–ª–∞'
];
```

–ò –≤ `webhook.php`:

```php
$secret = $_SERVER['HTTP_X_TELEGRAM_BOT_API_SECRET_TOKEN'] ?? '';

if ($secret !== '–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-—Ç–æ–∫–µ–Ω-32-—Å–∏–º–≤–æ–ª–∞') {
    http_response_code(403);
    exit('Invalid secret');
}
```

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –µ—Å–ª–∏:

- [ ] –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `php-backend/telegram-bot/`
- [ ] Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ –≤ `set-webhook.php`)
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/myteam` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
- [ ] –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥
- [ ] –ö–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–°–æ–æ–±—â–µ—Å—Ç–≤–æ:** https://t.me/+QgiLIa1gFRY4Y2Iy

**–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:**
1. –ü—Ä–æ–≤–µ—Ä—å webhook: `getWebhookInfo`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ PHP –≤ –ø–∞–Ω–µ–ª–∏ Timeweb
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π `send-notification.php` –Ω–∞–ø—Ä—è–º—É—é
4. –ù–∞–ø–∏—à–∏ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞:

1. –ó–∞–º–µ–Ω–∏ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ó–∞–Ω–æ–≤–æ —É—Å—Ç–∞–Ω–æ–≤–∏ webhook: `set-webhook.php`
3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É: `/start` –≤ –±–æ—Ç–µ

---

**–í–µ—Ä—Å–∏—è:** 1.0 (PHP Webhook Edition)  
**–î–∞—Ç–∞:** 2025-10-20  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** PHP 7.4+, MySQL 5.7+, HTTPS
