# ü§ñ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP Telegram –±–æ—Ç–∞ –Ω–∞ Timeweb

–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ **–ë–ï–ó VPS** (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±—ã—á–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ).

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª—ã

–ó–∞–≥—Ä—É–∑–∏ –ø–∞–ø–∫—É `php-backend/telegram-bot/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä Timeweb –≤:
```
public_html/php-backend/telegram-bot/
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
```
public_html/
‚îî‚îÄ‚îÄ php-backend/
    ‚îî‚îÄ‚îÄ telegram-bot/
        ‚îú‚îÄ‚îÄ webhook.php
        ‚îú‚îÄ‚îÄ set-webhook.php
        ‚îî‚îÄ‚îÄ send-notification.php
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏ webhook

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://ce876244.tw1.ru/php-backend/telegram-bot/set-webhook.php
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞: [@TournamentWR_bot](https://t.me/TournamentWR_bot)
2. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É: `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º

**–ì–æ—Ç–æ–≤–æ!** üéâ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Webhook vs Long Polling

**Long Polling** (VPS –≤–µ—Ä—Å–∏—è):
- ‚ùå –¢—Ä–µ–±—É–µ—Ç VPS —Å–µ—Ä–≤–µ—Ä
- ‚ùå –ù—É–∂–µ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- ‚ùå –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

**Webhook** (PHP –≤–µ—Ä—Å–∏—è):
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±—ã—á–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ
- ‚úÖ Telegram —Å–∞–º –≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—à —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É
        ‚Üì
2. Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à webhook.php
        ‚Üì
3. webhook.php –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
        ‚Üì
4. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ Telegram API
```

---

## üìù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –í —Ñ–∞–π–ª–µ `teams.php` –µ—Å—Ç—å –∫–æ–¥:

```php
// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
$notify_url = 'https://ce876244.tw1.ru/php-backend/api/notify-captain.php';
$notify_data = [
    'team_id' => $team_id,
    'action' => 'send_auth_code'
];

$options = [
    'http' => [
        'header'  => "Content-type: application/json\r\n",
        'method'  => 'POST',
        'content' => json_encode($notify_data),
        'timeout' => 5
    ]
];

$context = stream_context_create($options);
@file_get_contents($notify_url, false, $context);
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ö–∞–ø–∏—Ç–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–∞–π—Ç–µ
2. API —Å–æ–∑–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É –≤ –ë–î
3. API –≤—ã–∑—ã–≤–∞–µ—Ç `send-notification.php`
4. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω—É –≤ Telegram

---

## üîß –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---------|------------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/register` | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| `/myteam` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

| –°–æ–±—ã—Ç–∏–µ | –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–ø–∏—Ç–∞–Ω |
|---------|----------------------|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã | üîë –ö–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (REG-XXXX-XXXX) |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã | ‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ |
| –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã | ‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è |
| –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞—è–≤–∫–∏ | ‚úÖ/‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ |

### –ö–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –∫–∞–ø–∏—Ç–∞–Ω –ø–æ–ª—É—á–∞–µ—Ç:
```
‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

üèÜ –ö–æ–º–∞–Ω–¥–∞: Team Name

üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è:
...

[‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚ùå –û—Ç–º–µ–Ω–∏—Ç—å]
```

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ telegram_users

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ `/start`:

```sql
CREATE TABLE IF NOT EXISTS telegram_users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    chat_id BIGINT UNIQUE NOT NULL,
    username VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `chat_id` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°–≤—è–∑—ã–≤–∞–µ—Ç Telegram username —Å –∫–æ–º–∞–Ω–¥–æ–π
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –∫–∞–ø–∏—Ç–∞–Ω–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ü—Ä–æ–≤–µ—Ä—å webhook:**
   ```
   https://api.telegram.org/bot8008657360:AAGUdeZTn_s0YMfB7LjQHSKd0cGXnt5yxds/getWebhookInfo
   ```
   
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```json
   {
     "ok": true,
     "result": {
       "url": "https://ce876244.tw1.ru/php-backend/telegram-bot/webhook.php",
       "pending_update_count": 0
     }
   }
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
   - –ü–∞–Ω–µ–ª—å Timeweb ‚Üí –õ–æ–≥–∏ ‚Üí –õ–æ–≥–∏ PHP
   - –ò—â–∏ –æ—à–∏–±–∫–∏ —Å `Telegram Update`

3. **–ó–∞–Ω–æ–≤–æ —É—Å—Ç–∞–Ω–æ–≤–∏ webhook:**
   - –û—Ç–∫—Ä–æ–π `set-webhook.php`
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–ø–∏—Ç–∞–Ω –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–∞–ø–∏—Ç–∞–Ω –Ω–∞–ø–∏—Å–∞–ª –±–æ—Ç—É `/start`:**
   - –ë–µ–∑ —ç—Ç–æ–≥–æ –±–æ—Ç –Ω–µ –∑–Ω–∞–µ—Ç `chat_id` –∫–∞–ø–∏—Ç–∞–Ω–∞
   - –ü–æ–ø—Ä–æ—Å–∏ –∫–∞–ø–∏—Ç–∞–Ω–∞ –Ω–∞–ø–∏—Å–∞—Ç—å `/start`

2. **–ü—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—É telegram_users:**
   ```sql
   SELECT * FROM telegram_users WHERE username LIKE '%–∫–∞–ø–∏—Ç–∞–Ω%';
   ```
   
   –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å –µ–≥–æ username.

3. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏:**
   - –§–∞–π–ª `send-notification.php` –ª–æ–≥–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É
   - –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ PHP –≤ –ø–∞–Ω–µ–ª–∏ Timeweb

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `pending_changes` —Å–æ–∑–¥–∞—ë—Ç—Å—è:**
   ```sql
   SELECT * FROM pending_changes;
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å callback –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `webhook.php`:**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `handleCallbackQuery`
   - –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

### –ü—Ä–æ–±–ª–µ–º–∞: SSL –æ—à–∏–±–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**

Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è webhook.

1. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —É —Ç–µ–±—è SSL:**
   - –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç —á–µ—Ä–µ–∑ `https://`
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–π –∑–∞–º–æ–∫

2. **–ü–æ–ª—É—á–∏ SSL –≤ Timeweb:**
   - –ü–∞–Ω–µ–ª—å ‚Üí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
   - –ü–æ–ª—É—á–∏—Ç—å Let's Encrypt (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ webhook

–î–æ–±–∞–≤—å –ø—Ä–æ–≤–µ—Ä–∫—É IP Telegram –≤ –Ω–∞—á–∞–ª–æ `webhook.php`:

```php
// Telegram IP ranges
$telegram_ips = [
    '149.154.160.0/20',
    '91.108.4.0/22'
];

$client_ip = $_SERVER['REMOTE_ADDR'];
$is_telegram = false;

foreach ($telegram_ips as $ip_range) {
    if (cidr_match($client_ip, $ip_range)) {
        $is_telegram = true;
        break;
    }
}

if (!$is_telegram) {
    http_response_code(403);
    exit('Access denied');
}
```

### Secret Token

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ webhook:

```php
// –í set-webhook.php
$data = [
    'url' => WEBHOOK_URL,
    'secret_token' => 'your-32-char-secret-here'
];
```

–ò –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `webhook.php`:

```php
$secret = $_SERVER['HTTP_X_TELEGRAM_BOT_API_SECRET_TOKEN'] ?? '';
if ($secret !== 'your-32-char-secret-here') {
    http_response_code(403);
    exit('Invalid secret');
}
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ webhook

```bash
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- `url` - –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ webhook
- `pending_update_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)
- `last_error_message` - –ø–æ—Å–ª–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ë–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ PHP –ª–æ–≥–∏:

```php
error_log("Telegram Update: " . $content);
```

–°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏:
- –ü–∞–Ω–µ–ª—å Timeweb ‚Üí –õ–æ–≥–∏ ‚Üí –õ–æ–≥–∏ PHP
- –ò–ª–∏ `/var/log/php_errors.log`

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å VPS –≤–µ—Ä—Å–∏–µ–π

| –§—É–Ω–∫—Ü–∏—è | VPS (Python/Node) | Timeweb (PHP) |
|---------|-------------------|---------------|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ | ‚úÖ | ‚úÖ |
| –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ | ‚úÖ | ‚úÖ |
| –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π | ‚úÖ | ‚úÖ |
| –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è | ‚úÖ | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–∞ /start | ‚úÖ | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–∞ /myteam | ‚úÖ | ‚úÖ |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚úÖ | ‚úÖ |
| –¢—Ä–µ–±—É–µ—Ç VPS | ‚ùå –î–∞ | ‚úÖ –ù–µ—Ç |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ | üî¥ –°–ª–æ–∂–Ω–æ | üü¢ –õ–µ–≥–∫–æ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | üí∞ $5-10/–º–µ—Å | üí∞ $0 (–≤–∫–ª—é—á–µ–Ω–æ) |

**–í—ã–≤–æ–¥:** PHP –≤–µ—Ä—Å–∏—è –ø—Ä–æ—â–µ –∏ –¥–µ—à–µ–≤–ª–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ —Ö–æ—Ä–æ—à–æ!

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å:

- [ ] –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `php-backend/telegram-bot/`
- [ ] Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/myteam` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –≤ Telegram
- [ ] –¢–∞–±–ª–∏—Ü–∞ `telegram_users` —Å–æ–∑–¥–∞–Ω–∞
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∞–∫—Ç–∏–≤–µ–Ω (https://)
- [ ] –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

---

## üîÑ –ü–µ—Ä–µ—Ö–æ–¥ —Å VPS –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç VPS –≤–µ—Ä—Å–∏—è:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏ VPS –±–æ—Ç–∞:**
   ```bash
   pm2 stop bot
   ```

2. **–£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π webhook:**
   ```bash
   curl https://api.telegram.org/bot<TOKEN>/deleteWebhook
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏ –Ω–æ–≤—ã–π webhook:**
   - –û—Ç–∫—Ä–æ–π `set-webhook.php`

4. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É:**
   - –ù–∞–ø–∏—à–∏ –±–æ—Ç—É `/start`

**–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è!** –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–°–æ–æ–±—â–µ—Å—Ç–≤–æ:** https://t.me/+QgiLIa1gFRY4Y2Iy

**–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:**
1. –ü—Ä–æ–≤–µ—Ä—å webhook: `getWebhookInfo`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ PHP –≤ –ø–∞–Ω–µ–ª–∏ Timeweb
3. –ù–∞–ø–∏—à–∏ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `public/php-backend/telegram-bot/README.md`

**Telegram Bot API:** https://core.telegram.org/bots/api

**Webhook Guide:** https://core.telegram.org/bots/webhooks

---

**–í–µ—Ä—Å–∏—è:** 1.0 (PHP Webhook)  
**–î–∞—Ç–∞:** 2025-10-20  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** PHP 7.4+, HTTPS, MySQL 5.7+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
